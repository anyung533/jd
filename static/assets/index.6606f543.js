var e=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(a,o,t)=>o in a?e(a,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[o]=t,c=(e,a)=>{for(var o in a||(a={}))s.call(a,o)&&n(e,o,a[o]);if(t)for(var o of t(a))r.call(a,o)&&n(e,o,a[o]);return e},l=(e,t)=>a(e,o(t));import{r as i,o as d,c as u,a as m,b as p,F as k,k as y,u as f,d as g,e as v,f as h,g as b,t as w,h as P,w as C,i as j,_ as A,j as _,l as I,m as x,n as L,p as S,q as U,s as V}from"./vendor.c778b91d.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?a.credentials="include":"anonymous"===e.crossorigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const N={class:"main"},O={setup:e=>(e,a)=>{const o=i("Header"),t=i("router-view");return d(),u(k,null,[m(o),p("div",N,[m(t)])],64)}};const R=y.create({prefixUrl:"/api",retry:{limit:0}});const Q={setup(){const e=f();g();const a=v("");let o=h({nickName:void 0,timestamp:void 0});const t=async()=>{try{const e=localStorage.getItem("eid");if(!e)return void s();const t=await function(e){const a=new URLSearchParams;return a.set("eid",e),R.get("userinfo",{searchParams:a}).json()}(e);if(!t)return A.error("获取用户信息失败，请重重新登录"),void s();o.nickName=t.data.nickName,o.timestamp=new Date(t.data.timestamp).toLocaleString(),a.value=t.data.remark}catch(e){console.error(e)}};b(t);const s=()=>{localStorage.removeItem("eid"),e.push("/login")};return l(c({},w(o)),{activity:[{name:"玩一玩（可找到大多数活动）",address:"京东 APP 首页-频道-边玩边赚",href:"https://funearth.m.jd.com/babelDiy/Zeus/3BB1rymVZUo4XmicATEUSDUgHZND/index.html"},{name:"京东试用",address:"京东APP-首页/十个小图标滑倒最右边-更多频道-0元试用(新品试用)"},{name:"宠汪汪",address:"京东APP-首页/玩一玩/我的-宠汪汪"},{name:"东东萌宠",address:"京东APP-首页/玩一玩/我的-东东萌宠"},{name:"东东农场",address:"京东APP-首页/玩一玩/我的-东东农场"},{name:"东东工厂",address:"京东APP-首页/玩一玩/我的-东东工厂"},{name:"东东超市",address:"京东APP-首页/玩一玩/我的-东东超市"},{name:"领现金",address:"京东APP-首页/玩一玩/我的-领现金"},{name:"东东健康社区",address:"京东APP-首页/玩一玩/我的-东东健康社区"},{name:"京喜农场",address:"京喜APP-我的-京喜农场"},{name:"京喜牧场",address:"京喜APP-我的-京喜牧场"},{name:"京喜工厂",address:"京喜APP-我的-京喜工厂"},{name:"京喜财富岛",address:"京喜APP-我的-京喜财富岛"},{name:"京东极速版红包",address:"京东极速版APP-我的-红包"}],getInfo:t,logout:s,delAccount:async()=>{try{const e=localStorage.getItem("eid"),a=await function(e){return R.post("delaccount",{json:e}).json()}({eid:e});200!==a.code?A.error(a.message):(A.success(a.message),setTimeout((()=>{s()}),1e3))}catch(e){console.error(e)}},openUrlWithJD:e=>{const a=encodeURIComponent(`{"category":"jump","des":"m","action":"to","url":"${e}"}`);window.location.href=`openapp.jdmobile://virtual?params=${a}`,console.log(window.location.href)},submitRemark:async()=>{try{const e=localStorage.getItem("eid");if(!e)return void s();const o={eid:e,remark:a.value};console.log(o);const t=await function(e){return R.post("update/remark",{json:e}).json()}(o);A.success(t.message)}catch(e){console.error(e)}},remark:a})}},D={class:"content"},q={class:"card"},z=p("div",{class:"card-header"},[p("p",{class:"card-title"},"个人中心")],-1),E={class:"card-body"},K={class:"card-footer"},T=I("退出登录"),$=I("删除账号"),J={class:"card"},Z=p("div",{class:"card-header"},[p("p",{class:"card-title"},"添加备注通知管理员"),p("span",{class:"card-subtitle"}," 备注用于识别用户消息通知，登陆请先配置一次。定期会清除没有备注或备注格式不正确的的账号 "),p("p",null,[p("span",{class:"card-subtitle"}," 备注示例: 张三&08.27（姓名/微信 & 上车日期） ")])],-1),B={class:"card-body"},H={class:"card-footer"},W=I("提交"),F={class:"card"},M=p("div",{class:"card-header"},[p("p",{class:"card-title"},"常见活动位置"),p("span",{class:"card-subtitle"},"下面是一些常见活动的位置")],-1),X={class:"card-body"},G={class:"pr-2"},Y=["onClick"];Q.render=function(e,a,o,t,s,r){const n=i("el-button"),c=i("el-input");return d(),u("div",D,[p("div",q,[z,p("div",E,[p("p",null,"昵称："+P(e.nickName),1),p("p",null,"更新时间："+P(e.timestamp),1)]),p("div",K,[m(n,{size:"small",auto:"",onClick:t.logout},{default:C((()=>[T])),_:1},8,["onClick"]),m(n,{type:"danger",size:"small",auto:"",onClick:t.delAccount},{default:C((()=>[$])),_:1},8,["onClick"])])]),p("div",J,[Z,p("div",B,[m(c,{modelValue:t.remark,"onUpdate:modelValue":a[0]||(a[0]=e=>t.remark=e)},null,8,["modelValue"])]),p("div",H,[m(n,{type:"primary",size:"small",auto:"",onClick:t.submitRemark},{default:C((()=>[W])),_:1},8,["onClick"])])]),p("div",F,[M,p("div",X,[p("ul",null,[(d(!0),u(k,null,j(t.activity,((e,a)=>(d(),u("li",{key:a,class:"leading-normal"},[p("span",null,P(e.name)+"：",1),p("span",G,P(e.address),1),e.href?(d(),u("a",{key:0,class:"text-blue-400",href:"#",onClick:a=>t.openUrlWithJD(e.href)},"直达链接",8,Y)):_("",!0)])))),128))])])])])};const ee={setup(){const e=f();g();const a={}.VITE_NINJA_UA;let o=h({marginCount:0,allowAdd:!0,cookie:"",QRCode:void 0,qrCodeVisibility:!1,token:void 0,okl_token:void 0,cookies:void 0,timer:void 0,waitLogin:!1});const t=async()=>{try{const e=(await R.get("info").json()).data;o.marginCount=e.marginCount,o.allowAdd=e.allowAdd}catch(e){console.error(e)}},s=async()=>{try{const e=await R.get("qrcode").json();o.token=e.data.token,o.okl_token=e.data.okl_token,o.cookies=e.data.cookies,o.QRCode=e.data.QRCode,o.QRCode&&(o.waitLogin=!0,clearInterval(o.timer),o.timer=setInterval(r,3e3))}catch(e){console.error(e),A.error("生成二维码失败！请重试或放弃")}},r=async()=>{console.log(a);try{const t=await function(e){return R.post("check",{json:e}).json()}({token:o.token,okl_token:o.okl_token,cookies:o.cookies,ua:a});switch(null==t?void 0:t.data.errcode){case 0:localStorage.setItem("eid",t.data.eid),A.success(t.message),clearInterval(o.timer),e.push("/");break;case 176:break;default:A.error(t.message),o.waitLogin=!1,clearInterval(o.timer)}}catch(t){clearInterval(o.timer),o.waitLogin=!1}};return b((()=>{t(),s()})),l(c({},w(o)),{getInfo:t,getQrcode:s,showQrcode:async()=>{o.qrCodeVisibility=!0},ckeckLogin:r,jumpLogin:async()=>{const e=`openapp.jdmobile://virtual/ad?params={"category":"jump","des":"ThirdPartyLogin","action":"to","onekeylogin":"return","url":"https://plogin.m.jd.com/cgi-bin/m/tmauth?appid=300&client_type=m&token=${o.token}","authlogin_returnurl":"weixin://","browserlogin_fromurl":"${window.location.host}"}`;window.location.href=e},CKLogin:async()=>{try{const e=o.cookie.match(/pt_key=(.*?);/)&&o.cookie.match(/pt_key=(.*?);/)[1],a=o.cookie.match(/pt_pin=(.*?);/)&&o.cookie.match(/pt_pin=(.*?);/)[1];if(e&&a){const o=await function(e){return R.post("cklogin",{json:e}).json()}({pt_key:e,pt_pin:a});200===o.code&&o.data.eid?(localStorage.setItem("eid",o.data.eid),A.success(o.message)):A.error(o.message||"cookie 解析失败，请检查后重试！")}else A.error("cookie 解析失败，请检查后重试！")}catch(e){console.error(e)}}})}},ae={class:"content"},oe={class:"card"},te=p("div",{class:"card-header"},[p("p",{class:"card-title"},"🏎Ninja上车公告🏎"),p("span",{class:"card-subtitle"}," 请认真阅读并同意以下内容 ")],-1),se=p("div",{class:"card-body"},[p("p",null,"①，使用京东扫描二维码登录，提示升级版本无需理会，直接回到网页等待跳转，登录成功显示用户名或者提示添加成功即自动上车。"),p("p",null,"②，使用手机用户可以点击跳转到京东，点击一键登录，然后直接回到浏览器，强烈建议修改备注为扫码日期+网名。"),p("p",null,"③，在登录以后页面，打开微信扫描推送二维码关注，申请加入，通过以后即可收取任务通知。"),p("p",null,"④，点退出登录，返回这个页面刷新网页，即可添加或更新第二个账号，不要随便点击删除账号。"),p("p",null,"⑤，扫码登录Cookie正常有效期最多1个月，建议15天重新登陆一次"),p("p",null,"⑥，已经上车的账号再次扫描登陆自动替换最新Cookie。Cookie失效长时间不替换的自动踢出车位。"),p("p",null,"⑦，为了你的财产安全，强烈建议关闭免密支付并且开启支付验证密码。")],-1),re={class:"card-footer"},ne=I("提交"),ce={class:"card"},le={class:"card-header"},ie={class:"flex items-center justify-between"},de=p("p",{class:"card-title"},"扫码登录",-1),ue={class:"ml-2 px-2 py-1 bg-gray-200 rounded-full font-normal text-xs"},me=p("span",{class:"card-subtitle"}," 请点击下方按钮登录，点击按钮后回到本网站查看是否登录成功，京东的升级提示不用管。 ",-1),pe={class:"card-body text-center"},ke={key:0,class:"flex flex-col w-48 m-auto mt-4"},ye=I("扫描二维码登录"),fe=I("跳转到京东 App 登录"),ge=["src"],ve=p("div",{class:"card-footer"},null,-1),he={class:"card hidden"},be={class:"card-header"},we={class:"flex items-center justify-between"},Pe=p("p",{class:"card-title"},"CK 登录",-1),Ce={class:"ml-2 px-2 py-1 bg-gray-200 rounded-full font-normal text-xs"},je=p("span",{class:"card-subtitle"}," 请在下方输入您的 cookie 登录。 ",-1),Ae={class:"card-body text-center"},_e=I("登录"),Ie=p("div",{class:"card-footet"},null,-1);ee.render=function(e,a,o,t,s,r){const n=i("el-button"),c=i("el-input");return d(),u("div",ae,[p("div",oe,[te,se,p("div",re,[m(n,{type:"primary",size:"small",auto:"",onClick:e.submitRemark},{default:C((()=>[ne])),_:1},8,["onClick"])])]),p("div",ce,[p("div",le,[p("div",ie,[de,p("span",ue,"余量："+P(e.marginCount),1)]),me]),p("div",pe,[e.qrCodeVisibility?(d(),u("img",{key:1,src:e.QRCode,width:256,class:"m-auto"},null,8,ge)):(d(),u("div",ke,[m(n,{type:"primary",round:"",onClick:t.showQrcode},{default:C((()=>[ye])),_:1},8,["onClick"]),m(n,{class:"mt-4 ml-0",type:"primary",round:"",onClick:t.jumpLogin},{default:C((()=>[fe])),_:1},8,["onClick"])]))]),ve]),p("div",he,[p("div",be,[p("div",we,[Pe,p("span",Ce,"余量："+P(e.marginCount),1)]),je]),p("div",Ae,[m(c,{modelValue:e.cookie,"onUpdate:modelValue":a[0]||(a[0]=a=>e.cookie=a),size:"small",clearable:"",class:"my-4 w-full"},null,8,["modelValue"]),m(n,{type:"primary",size:"small",round:"",onClick:t.CKLogin},{default:C((()=>[_e])),_:1},8,["onClick"])]),Ie])])};const xe=[{path:"/",component:Q},{path:"/login",component:ee}],Le=x({history:L(),routes:xe}),Se=[U,V,A],Ue=[A],Ve=S(O);Se.forEach((e=>{Ve.component(e.name,e)})),Ue.forEach((e=>{Ve.use(e)})),Ve.use(Le),Ve.mount("#app");
